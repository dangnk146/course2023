{% extends 'indexTeacher.html' %}
{% block title %}
<title> Thêm bài trắc nghiệm | {{course.name}} {{class_membership.name}} Bảng điều khiển giáo viên | Môn học</title>
{% endblock %}


{% block titleh1 %}
Quản lý môn học ||| Lớp: {{class_membership.name}} ||| Môn học: {{course.name}} | Thêm bài trắc nghiệm
{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="/">Trang chủ</a></li>
<li class="breadcrumb-item ">Bảng điều khiển giáo viên</li>
<li class="breadcrumb-item"><a href="{% url 'manageTeacherClass' class_membership.id %}">{{class_membership.name}}</a>
</li>
<li class="breadcrumb-item active"><a
        href="{% url 'manageTeacherClassCourse' class_membership.id course.id %}">{{course.name}}</a></li>
{% endblock %}

{% block {{class_membership.name}} %}
active
{% endblock %}

{% block body %}
<section class="section dashboard">
    <a class="bold text-secondary" href="{% url 'manageTeacherClassCourse' class_membership.id course.id %}"><i
            class="bi bi-arrow-left-circle-fill"></i> Trở về {{course.name}}</a>
    <div class="row">
        <div class="col-12 mt-3">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Thêm bài dạy trắc nghiệm {{course.name}}</h5>
                    <div class="container">
                        <form method="post" action="">
                            {% csrf_token %}
                            <div class="row my-2">
                                <div class="col-8">
                                    <div class="form-outline">
                                        <label class="form-label" for="form3Example1">Tên bài trắc nghiệm</label>
                                        <input type="text" name="name" id="form3Example1" class="form-control" />
                                    </div>
                                </div>
                                <div class="col-8">
                                    <div class="form-outline">
                                        <label class="form-label" for="form3Example1">Mô tả</label>
                                        <input type="text" name="description" id="form3Example1" class="form-control" />
                                    </div>
                                </div>
                            </div>
                            <div class="row sortable-list w-100">
                                    <div class="item col-12 " draggable="true">
                                        <div class="col-8">
                                            <div class="form-outline">
                                                <label class="form-label" for="form3Example1">Tên câu trắc nghiệm</label>
                                                <input type="text" name="nametracnghiem" id="form3Example1" class="form-control" />
                                            </div>
                                            <div class="col-8">
                                                <div class="form-outline">
                                                   A. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án A" class="form-control" />
                                                   B. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án B" class="form-control" />
                                                   C. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án C" class="form-control" />
                                                   D. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án D" class="form-control" />
                                                </div>
                                            </div>
                                        </div>
                                        <i class="uil uil-draggabledots"></i>
                                    </div>

                                    <div class="item col-12 " draggable="true">
                                        <div class="col-8">
                                            <div class="form-outline">
                                                <label class="form-label" for="form3Example1">Tên câu trắc nghiệm</label>
                                                <input type="text" name="nametracnghiem" id="form3Example1" class="form-control" />
                                            </div>
                                            <div class="col-8">
                                                <div class="form-outline">
                                                   A. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án A" class="form-control" />
                                                   B. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án B" class="form-control" />
                                                   C. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án C" class="form-control" />
                                                   D. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án D" class="form-control" />
                                                </div>
                                            </div>
                                        </div>
                                        <i class="uil uil-draggabledots"></i>
                                    </div>
                                
                                    <div class="item col-12 " draggable="true">
                                        <div class="col-8">
                                            <div class="form-outline">
                                                <label class="form-label" for="form3Example1">Tên câu trắc nghiệm</label>
                                                <input type="text" name="nametracnghiem" id="form3Example1" class="form-control" />
                                            </div>
                                            <div class="col-8">
                                                <div class="form-outline">
                                                   A. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án A" class="form-control" />
                                                   B. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án B" class="form-control" />
                                                   C. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án C" class="form-control" />
                                                   D. <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1"> <input type="text" name="nametracnghiem" id="form3Example1" placeholder="Đáp án D" class="form-control" />
                                                </div>
                                            </div>
                                        </div>
                                        <i class="uil uil-draggabledots"></i>
                                    </div>
                                
                                
                            </div>
                            <button class="btn btn-outline-info">Thêm câu trắc nghiệm</button>

                            <!-- Submit button -->
                            <div class="align-center align-items-center text-center">
                                <button type="submit" class="btn btn-warning btn-block mt-4">Thêm bài trắc
                                    nghiệm</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
<style>
    .sortable-list {
        width: 425px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 7px;
        padding: 30px 25px 20px;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    .sortable-list .item {
        list-style: none;
        display: flex;
        cursor: move;
        background: rgba(255, 255, 255, 0.99);
        align-items: center;
        border-radius: 5px;
        padding: 10px 13px;
        margin-bottom: 11px;
        /* box-shadow: 0 2px 4px rgba(0,0,0,0.06); */
        border: 1px solid #ccc;
        justify-content: space-between;
    }

    .item .details {
        display: flex;
        align-items: center;
    }

    .item .details i.brand-icon {
        padding: 5px;
        margin-right: 12px;
        border-radius: 50%;
    }

    .item .details span {
        font-size: 1.13rem;
    }

    .item i {
        color: #474747;
        font-size: 1.13rem;
    }

    .item.dragging {
        opacity: 0.6;
    }

    .item.dragging :where(.details, i) {
        opacity: 0;
    }
</style>
{% endblock %}
{% block script %}
{% load static %}
<script src="https://cdn.tiny.cloud/1/d8za75g2087d61ncwe0m05rc8whd9djpcsgh12v0x9d43oub/tinymce/6/tinymce.min.js"
    referrerpolicy="origin"></script>

<script>
    tinymce.init({
        selector: 'textarea#content',
        plugins: 'lists, link, image, media',
        toolbar: 'h1 h2 bold italic strikethrough blockquote bullist numlist backcolor | link image media | removeformat help',
        menubar: false,
        setup: (content) => {
            // Apply the focus effect
            content.on("init", () => {
                content.getContainer().style.transition = "border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out";
            });
            content.on("focus", () => {
                (content.getContainer().style.boxShadow = "0 0 0 .2rem rgba(0, 123, 255, .25)"),
                    (content.getContainer().style.borderColor = "#80bdff");
            });
            content.on("blur", () => {
                (content.getContainer().style.boxShadow = ""),
                    (content.getContainer().style.borderColor = "");
            });
        },
    });
</script>
<script>
    const sortableList = document.querySelector(".sortable-list");
    const items = sortableList.querySelectorAll(".item");

    items.forEach(item => {
        item.addEventListener("dragstart", () => {
            // Adding dragging class to an item after a delay
            setTimeout(() => item.classList.add("dragging"), 0);
        });
        // Removing dragging class from the item on the dragend event
        item.addEventListener("dragend", () => item.classList.remove("dragging"));
    });

    const initSortableList = (e) => {
        e.preventDefault();
        const draggingItem = document.querySelector(".dragging");
        // Getting all items except currently dragging and making an array of them
        let siblings = [...sortableList.querySelectorAll(".item:not(.dragging)")];

        // Finding the sibling after which the dragging item should be placed
        let nextSibling = siblings.find(sibling => {
            return e.clientY <= sibling.offsetTop + sibling.offsetHeight / 2;
        });

        // Inserting the dragging item before the found sibling
        sortableList.insertBefore(draggingItem, nextSibling);
    }

    sortableList.addEventListener("dragover", initSortableList);
    sortableList.addEventListener("dragenter", e => e.preventDefault());
</script>
{% endblock %}